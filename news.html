<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>News | StockNews</title>

<link rel="stylesheet" href="../css/style.css">
</head>
<body>

<!-- HEADER (SAME AS INDEX) -->
<header>
  <div class="menu-btn" onclick="openMenu()">‚ò∞</div>
  <div class="logo">StockNews</div>
</header>

<!-- MOBILE MENU -->
<div id="mobileMenu" class="mobile-menu">
  <span class="close" onclick="closeMenu()">‚úï</span>
  <div class="menu-header">Stock Edge</div>

  <div class="menu-accordion" onclick="toggleCat()">
    News Categories <span id="arrow">‚ñº</span>
  </div>

  <div id="catMenu" class="submenu">
    <a href="../category.html?cat=latest">Latest News</a>
    <a href="../category.html?cat=earnings">Earnings</a>
    <a href="../category.html?cat=dividend">Dividend</a>
  </div>
</div>

<!-- ================= NEWS DETAIL ================= -->
<main>

<div class="news-detail-box">

  <h1 id="newsTitle">HDFC Bank Dividend</h1>

  <div class="news-detail-meta">
    <span id="newsDate"></span>
    <span id="newsCategory"></span>
  </div>

  <img id="newsImage" class="news-detail-image" src="" alt="">

  <!-- üî¥ FULL NEWS CONTENT YAHA MANUALLY LIKHE -->
  <div class="news-full-content">
    <p>
      HDFC Bank ne apne shareholders ke liye ‚Çπ15 per share dividend announce
      kiya hai. Bank ke board ne financial performance ke baad is dividend
      ko approve kiya.
    </p>

    <p>
      Record date aur payment date jald hi announce ki jayegi.
      Investors ko is announcement se short term me positive impact
      dekhne ko mil sakta hai.
    </p>
  </div>

  <!-- BACK BUTTON -->
  <a href="../index.html" class="back-btn">‚Üê Back to Home</a>

</div>
  <div class="share-box">
  <span class="share-label">Share:</span>

  <a id="shareWhatsapp" target="_blank" class="share-btn wa">WhatsApp</a>
  <a id="shareFacebook" target="_blank" class="share-btn fb">Facebook</a>
  <a id="shareTelegram" target="_blank" class="share-btn tg">Telegram</a>
  <a id="shareTwitter" target="_blank" class="share-btn tw">Twitter</a>
  </div>

<!-- ================= RELATED NEWS ================= -->
<section>
  <h2>Related News</h2>
  <div id="relatedNews"></div>
</section>

</main>

<!-- FOOTER -->
<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-brand">
      <h3>StockNews</h3>
      <p>Latest stock market news, earnings, dividends & updates.</p>
    </div>
  </div>
  
  <div class="footer-bottom">
    ¬© 2025 StockNews ‚Ä¢ Educational Purpose Only
  </div>
</footer>

<!-- ================= JS ================= -->
<script src="../js/latest.js"></script>
<script src="../js/earning.js"></script>
<script src="../js/dividend.js"></script>

<script>
/* MOBILE MENU */
function openMenu(){
  document.getElementById("mobileMenu").classList.add("show");
}
function closeMenu(){
  document.getElementById("mobileMenu").classList.remove("show");
}
function toggleCat(){
  const menu = document.getElementById("catMenu");
  const arrow = document.getElementById("arrow");
  if(menu.style.maxHeight){
    menu.style.maxHeight = null;
    arrow.innerText = "‚ñº";
  }else{
    menu.style.maxHeight = menu.scrollHeight + "px";
    arrow.innerText = "‚ñ≤";
  }
}

/* =====================
   LOAD DATA FROM JS
===================== */
const allNews = [...latestNews, ...earningNews, ...dividendNews];

// current page link
const params = new URLSearchParams(window.location.search);
const newsId = params.get("id");

const news = allNews.find(n => n.id == newsId);
  

if(news){
  document.getElementById("newsTitle").innerText = news.title;
  document.getElementById("newsCategory").innerText = news.category;
  document.getElementById("newsImage").src = news.image;

  const d = new Date(news.date);
  document.getElementById("newsDate").innerText = d.toDateString();
}
  
const shareUrl = encodeURIComponent(window.location.href);
const shareTitle = encodeURIComponent(
  document.getElementById("newsTitle")?.innerText || "Stock News"
);

document.getElementById("shareWhatsapp").href =
  `https://wa.me/?text=${shareTitle}%20${shareUrl}`;

document.getElementById("shareFacebook").href =
  `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}`;

document.getElementById("shareTelegram").href =
  `https://t.me/share/url?url=${shareUrl}&text=${shareTitle}`;

document.getElementById("shareTwitter").href =
  `https://twitter.com/intent/tweet?url=${shareUrl}&text=${shareTitle}`;
  
/* ======================
   RELATED + RANDOM NEWS
====================== */

const relatedBox = document.getElementById("relatedNews");

/* PROPER SHUFFLE (Fisher‚ÄìYates) */
function shuffleArray(arr){
  let array = [...arr];
  for(let i = array.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function renderRelatedNews(){
  if(!relatedBox || !news) return;

  /* ===== 4 RELATED NEWS ===== */
  const related = allNews.filter(n =>
    n.category === news.category && n.id != news.id
  ).slice(0,4);

  /* ----- RELATED ----- */
  relatedBox.innerHTML += `<h3>Related News</h3>`;

  related.forEach(n => {
    relatedBox.innerHTML += `
      <div class="news-card" onclick="location.href='${n.link}'">
        <img src="${n.image}" alt="">
        <div class="news-text">
          <div class="news-title">${n.title}</div>
          <div class="news-meta">${n.category}</div>
          <div class="news-summary">${n.summary || ""}</div>
        </div>
      </div>
    `;
  });
}

renderRelatedNews();
  
  
</script>

</body>
</html>

